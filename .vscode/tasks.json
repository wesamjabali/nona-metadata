{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Run yt-metadata server",
			"type": "shell",
			"command": "bun run yt-metadata.ts",
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "Check Node version",
			"type": "shell",
			"command": "node --version",
			"group": "build"
		},
		{
			"label": "Install Bun",
			"type": "shell",
			"command": "curl -fsSL https://bun.sh/install | bash",
			"group": "build"
		},
		{
			"label": "Run yt-metadata server with bun",
			"type": "shell",
			"command": "exec /bin/zsh && ~/.bun/bin/bun run yt-metadata.ts",
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "Run yt-metadata server",
			"type": "shell",
			"command": "~/.bun/bin/bun run yt-metadata.ts",
			"isBackground": true,
			"group": "build"
		},
		{
			"label": "Run metadata test script",
			"type": "shell",
			"command": "chmod +x test_metadata.sh && ./test_metadata.sh"
		},
		{
			"label": "Test metadata endpoint",
			"type": "shell",
			"command": "curl -s \"http://localhost:3000/metadata?file=Lil%20Wayne/Tha%20Carter%20V/Problems.mp3\" | jq '.'",
			"group": "build"
		},
		{
			"label": "Test PATCH metadata endpoint",
			"type": "shell",
			"command": "chmod +x test_patch_metadata.sh && ./test_patch_metadata.sh"
		},
		{
			"label": "Test cache stats endpoint",
			"type": "shell",
			"command": "curl -s \"http://localhost:3000/cache/stats\" | jq '.'",
			"group": "build"
		},
		{
			"label": "Test caching functionality",
			"type": "shell",
			"command": "chmod +x test_cache.sh && ./test_cache.sh",
			"group": "build"
		},
		{
			"label": "Test cache cleanup",
			"type": "shell",
			"command": "curl -s -X POST -H \"Content-Type: application/json\" -d '{\"daysOld\": 0}' \"http://localhost:3000/cache/cleanup\" | jq '.'",
			"group": "build"
		},
		{
			"label": "Check cache stats before testing frontend",
			"type": "shell",
			"command": "curl -s \"http://localhost:3000/cache/stats\" | jq '.'",
			"group": "build"
		},
		{
			"label": "Test frontend accessibility",
			"type": "shell",
			"command": "curl -s \"http://localhost/\" | head -10",
			"group": "build"
		}
	]
}